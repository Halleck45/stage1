{
  "builders": [
    {
      "api_key": "0988Y84XvmEIlQa11MhuuVEeo1bUsqdiyWMMA71Ur",
      "client_id": "xlylJ0GKfaX5pXDL5JN4z",
      "image_id": 894856,
      "region_id": 2,
      "size_id": 62,
      "snapshot_name": "stage1-docker.{{timestamp}}",
      "type": "digitalocean"
    }
  ],
  "provisioners": [
    {
      "destination": "/tmp/apt-sources.list",
      "source": "app/Resources/support/config/apt/sources.list",
      "type": "file"
    },
    {
      "destination": "/tmp/apt-rabbitmq.list",
      "source": "app/Resources/support/config/apt/rabbitmq.list",
      "type": "file"
    },
    {
      "destination": "/tmp/apt-dotdeb.list",
      "source": "app/Resources/support/config/apt/dotdeb.list",
      "type": "file"
    },
    {
      "destination": "/tmp/apt-docker.list",
      "source": "app/Resources/support/config/apt/docker.list",
      "type": "file"
    },
    {
      "destination": "/tmp/nginx-default",
      "source": "app/Resources/support/config/nginx/prod/default",
      "type": "file"
    },
    {
      "destination": "/tmp/nginx-htpasswd",
      "source": "app/Resources/support/config/nginx/prod/htpasswd",
      "type": "file"
    },
    {
      "destination": "/tmp/php-php.ini",
      "source": "app/Resources/support/config/php/prod.ini",
      "type": "file"
    },
    {
      "destination": "/tmp/rabbitmq-rabbitmq.config",
      "source": "app/Resources/support/config/rabbitmq/vm.config",
      "type": "file"
    },
    {
      "destination": "/tmp/keys-stage1-vm",
      "source": "app/Resources/support/keys/stage1-vm",
      "type": "file"
    },
    {
      "destination": "/tmp/keys-stage1-vm.pub",
      "source": "app/Resources/support/keys/stage1-vm.pub",
      "type": "file"
    },
    {
      "destination": "/tmp/monit-monitrc",
      "source": "app/Resources/support/config/monit/monitrc",
      "type": "file"
    },
    {
      "destination": "/tmp/monit-consumer-build",
      "source": "app/Resources/support/config/monit/consumer-build",
      "type": "file"
    },
    {
      "destination": "/tmp/monit-consumer-kill",
      "source": "app/Resources/support/config/monit/consumer-kill",
      "type": "file"
    },
    {
      "destination": "/tmp/monit-consumer-project-import",
      "source": "app/Resources/support/config/monit/consumer-project-import",
      "type": "file"
    },
    {
      "destination": "/tmp/monit-log-fetch",
      "source": "app/Resources/support/config/monit/log-fetch",
      "type": "file"
    },
    {
      "destination": "/tmp/monit-websockets",
      "source": "app/Resources/support/config/monit/websockets",
      "type": "file"
    },
    {
      "destination": "/tmp/monit-hipache",
      "source": "app/Resources/support/config/monit/hipache",
      "type": "file"
    },
    {
      "execute_command": "chmod +x {{ .Path }}; sudo {{ .Vars }} {{ .Path }}",
      "scripts": [
        "app/Resources/support/scripts/digitalocean.sh",
        "app/Resources/support/scripts/stage1.sh",
        "app/Resources/support/scripts/dev.sh"
      ],
      "type": "shell"
    }
  ]
}